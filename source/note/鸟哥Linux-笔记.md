---
title: 鸟哥Linux_笔记
author: XIA
categories:
  - Linux
tags:
  - Linux
date: 2019-06-07 14:21:59
---
# 计算机概论
- 在网络传输时，使用的是bit为单位 ，常见的传输单位Mbit/s。1Byte=8bit。所以当听到网速为8M/1M时，转换为文件容量常用单位Byte时，为1MB/s或128KB/s
- 计算机主板分为南桥和北桥。intel的芯片架构为：北桥负责连接速度较快的CPU、内存、显卡等部件。南桥则负责连接速度较慢的周边接口，包括硬盘、USB、网卡等。
- CPU的频率指的是CPU每秒可以进行的工作次数。如3.0GHz的频率，表示每秒可以进行3.0乘十的九次方次工作，每次工作进行少数指令的运行。不同CPU之间不能通过单纯比较频率来判断性能，因为每个CPU的微指令集不同，架构不同，每次频率处理的工作指令数目也不同。所以频率只能用来比较同款CPU
- CPU外频指与外部组件进行数据传输/运算时的速度。倍频指的是CPU内部用来加速工作性能的一个倍数，两者想乘便是CPU的工作频率。CPU超频主要指的是外频。

## 硬盘分区和磁盘分区

- 机械硬盘的盘片上每个扇区512bytes大小
- 在磁盘的第一个分区包含两部分组成：主引导区(MBR),可以安装引导加载程序的位置，446bytes。分区表，记录硬盘分区情况，64bytes。
- 所谓的分区就是对64字节的分区表进行设置而已
- 硬盘的默认分区表仅能写入四组分区信息，分区分为主分区和扩展分区，主分区+扩展分区只能有四个，这是硬盘决定的。扩展分区只能有一个，由操作系统决定。逻辑分区由扩展分区切割出来。扩展分区无法被格式化。
- 分区的单位是柱面
## 开机流程与主引导分区（MBR）

- CMOS：记录各项硬件参数且嵌入在主板上的储存器。BIOS：开机时计算机执行的第一个程序，也是写在主板上。
- 通过设置BIOS，设置启动的硬盘。然后计算机到该硬盘的第一个扇区找到MBR分区。此时BIOS的工作就完成了
- MBR中包含一个引导加载程序（Boot loader），该程序由操作系统安装时提供。可以用来读取操作系统的内核文件，当读取到操作系统内核文件时，该程序也就完成了任务。
- 引导加载程序一般包含三个功能：提供菜单，用户可以选择不同的开机选项，实现多重引导。载入内核文件，直接指向可开机的程序区来启动操作系统。转交给其他loader，将引导加载功能交给其他loader负责。
- 引导程序除了安装在MBR分区，还可以安装在每个分区的引导扇区。这就是多重引导。当引导程序指向另一个引导程序时，就实现了多重引导。

## 另一种引导方式（UEFI）

当使用GPT格式的硬盘时可以使用UEFI的引导方式，该方式是BIOS引导的进化版。

当硬盘格式为GPT时可以进行无限分区。当使用UFEI引导时装系统时，默认会创建一个ESP分区（UEFI的引导分区）里面会存放关于引导的相关文件。该分区为FAT32文件系统。

当进项双系统安装时引导分区都应设置为一个分区。在安装win与linux双系统时，关闭win的快速启动功能，否则启动电脑时默认进入win系统。

# bash shell

## what?

shell是可以用来调用操作系统功能的一个软件，操作系统管理硬件。

使用shell也可以调用别的软件。

linux将可以使用的shell保存在/etc/shells文件中，当用户登录后根据/etc/passwd文件获取用户使用的shell

bash shell是linux默认的shell

## bash shell的功能

- 命令记忆功能：用户使用的命令可以记忆下来，通过上下键可以进行选择和查看。被使用过的命令记录在~/.bash_history文件内。但是该文件只是记录之前登录的命令，这次登录使用的命令则存储在内存中，只有注销系统时才会存储在~/.bash_history文件中。
- 命令与文件名补全功能：tab键的使用
- 设置别名
- 作业控制、前台、后台控制
- 程序脚本（shell script）

## 命令的执行

当命令过长时可以使用`\回车`进行换行

## 变量

### 变量的设置和显示

- 变量设置`name=xbx`。等号两边不可以包含空格，变量名只可以包含字母和数字，且不可以以数字开头

- 变量的内容若包含空格则使用单引号或双引号将其包裹起来，但是若引号中包含变量,单引号中原样输出，双引号中则取出变量中的内容后输出：

  ```bash
  name=xbx
  hi='hello $name'        输出：hello xbx
  hi="hello $name"        输出：hello $name
  ```
  
- 设置变量时使用`\特殊字符`进行转义

- 当变量中包含其他命令时可以使用反单引号或$(命令)

  ```bash
  version=`uname -r`
  version=$(uname -r)
  
  echo $version
  2.168-128.el5
  ```

- 对已经存在的变量进行增加内容时：

  ```bash
  PATH="$PATH":/home/bin
  ```

- 若该变量需要在子线程执行，则需要以export来使变量变成环境变量

  ```bash
  export PATH
  ```

- 取消某个变量时使用unset命令

  ```bash
  unset name
  ```

- 一般大写字符为系统默认变量，自行设置的变量可以使用小写字符（纯粹依据用户喜好）

### 常用变量及功能

env命令可以查看当前环境下的所有环境变量，常用环境变量如下：

- HOME:用户的主文件夹
- SHELL：目前环境使用的shell
- PATH：执行文件的查找路径，以`:`分隔

set命令可以查看当前环境下所有环境变量与自定义变量

- PS1：提示符设置
- $:本shell的PID，使用`echo $$`显示
- ？：上次执行命令的回传码，一般0为成功,使用`echo ?`显示

export：将自定义变量转换成环境变量。环境变量可以被子线程引用而自定义变量只能在当前bash环境中使用。使用时`export 变量名`即可

**为什么环境变量可以被子线程引用？**

当启动一个shell时，操作系统会分配一块内存给shell使用，此内存中的变量可以被子进程取用。若父进程使用export功能，可以让自定义变量写入上述内存中。当加载另一个shell（即启动子线程），子shell可以将父shell的环境变量所在的内存导入到自己的环境变量内存中。

### 变量的键盘读取、数组与声明（read、array、declare）

- 键盘读取：read

  使用read命令可以读取键盘输入:-p,设置提示信息。-t，设置等待时间。

  ```bash
  read -p "please keying your name: " -t 30 name
  ```

- 变量声明：declare/typeset

  - 这两个命令作用相同，都是声明变量类型。

  - 当不添加任何参数时列出所有变量，类似set命令。

  - bash的便量默认都是字符串类型

  - declare参数：-a，定义变量为数组。-i，声明变量为整数类型。-x，将后面的变量声明为环境变量。-r，设置变量为只读类型。

    ```bash
    declare -ix sum=100        声明变量sum为整数类型且为环境变量
    
    var[0]=xia                 声明数组与取用数组内的数据
    var[1]=bao
    var[2]=xin
    
    echo "${var[0]},${var[0]},${var[0]}"
    ```
### 限制用户资源的ulimit
  用户在系统中能够使用的资源可以通过相关设置进行限制，如：开启的进程数，使用cpu的最大时间等。可以使用ulimit命令进行设置。

  该命令的一些参数：-a,后面不接参数列出所有限制信息。-f，可以创建的最大文件大小。-u，单一用户可以使用的最大进程。-t，可以使用的最大cpu时间。

### 变量内容的删除、替换和微调
  变量的内容可以通过相关的操作进行一些微调，可以查看鸟哥313页。

## 别名

通过alias可以设置命令的别名，单独使用该命令时则列出所有已经设置过的命令别名。

设置别名时`alias cls='clear'`。当取消别名时可以使用unalias进行取消`unalias cls`

## 历史命令

history命令可以查看用户使用的历史命令，不加参数使用时则列出所有历史命令。

该命令的一些参数：命令后面直接跟数字时，如history 3则列出最近的三条命令。-c，将目前sehll中所有历史命令清除。-w，将当前的历史命令写入到历史命令文件中，默认为~/.bash_history

**shell中关于历史命令的一些功能：**

- `！数字`时，表示执行第几条命令的意思

- `!command`执行最近一条以command开头的命令

- `!!`执行上一条命令